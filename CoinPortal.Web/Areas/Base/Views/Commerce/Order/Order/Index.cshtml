@model Devia.Sigma.Business.Commerce.Order.SgOrder
@using Devia.Sigma.Business.Commerce.Order.Entity

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Base/Views/Shared/_LayoutMain.cshtml";
}

@section pageHeader
{
    <style>
        .nav-pills>li+li {
             margin-left: 0px !important; 
        }

        ul.nav-pills li a{
            margin-bottom:0px;
            background-color:transparent !important;
        }
    </style>

    <style>
        .table>tbody>tr>td, .table>tfoot>tr>td{
            vertical-align: middle;
        }
        @@media screen and (max-width: 600px) {
            table#cart tbody td .form-control{
		        width:20%;
		        display: inline !important;
	        }
	        .actions .btn{
		        width:36%;
		        margin:1.5em 0;
	        }
	
	        .actions .btn-info{
		        float:left;
	        }
	        .actions .btn-danger{
		        float:right;
	        }
	
	        table#cart thead { display: none; }
	        table#cart tbody td { display: block; padding: .6rem; min-width:320px; text-align:left !important;}
	        table#cart tbody tr td:first-child { background: #4B77BE; color: #fff; }
	        table#cart tbody td:before {
		        content: attr(data-th); font-weight: bold;
		        display: inline-block; width: 8rem;
	        }
	
	
	
	        table#cart tfoot td{display:block; }
	        table#cart tfoot td .btn{display:block;}
	
        }
    </style>
}

<div class="portlet light bordered" id="form_wizard_1">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-shopping-cart font-green"></i>
            <span class="caption-subject font-green bold uppercase">
                SATIN ALMA
                @*<span class="step-title"> Step 1 of 4 </span>*@
            </span>
        </div>
        <div class="actions">
        </div>
    </div>
    <div class="portlet-body form">
        <div class="form-wizard">
            <div class="form-body mt-element-step">
                <div class="row step-thin">
                    <ul class="nav nav-pills nav-justified steps ">
                        <li id="tabBasket" class="col-md-3 bg-grey mt-step-col step active">
                            <a href="#tab1" data-toggle="tab" class="step">
                                <div class="mt-step-number bg-white font-grey">1</div>
                                <div class="mt-step-title uppercase font-grey-cascade text-left">SEPET</div>
                                <div class="mt-step-content font-grey-cascade text-left">0 ürün</div>
                            </a>
                        </li>
                        <li id="tabAddress" class="col-md-3 bg-grey mt-step-col step">
                            <a href="#tab2" data-toggle="tab">
                                <div class="mt-step-number bg-white font-grey">2</div>
                                <div class="mt-step-title uppercase font-grey-cascade text-left">ADRES BİLGİLERİ</div>
                                <div class="mt-step-content font-grey-cascade text-left">Adres bilgileri</div>
                            </a>
                        </li>
                        <li id="tabPayment" class="col-md-3 bg-grey mt-step-col step">
                            <a href="#tab3" data-toggle="tab">
                                <div class="mt-step-number bg-white font-grey">3</div>
                                <div class="mt-step-title uppercase font-grey-cascade text-left">ÖDEME BİLGİLERİ</div>
                                <div class="mt-step-content font-grey-cascade text-left">Kredi kartı bilgileri</div>
                            </a>
                        </li>
                        @*<li id="tabConfirm" class="col-md-3 bg-grey mt-step-col step">
                            <a href="#tab4" data-toggle="tab">
                                <div class="mt-step-number bg-white font-grey">4</div>
                                <div class="mt-step-title uppercase font-grey-cascade text-left">ÖDEME ONAY</div>
                                <div class="mt-step-content font-grey-cascade text-left">Siparişin onaylanması</div>
                            </a>
                        </li>*@
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane active" id="tab1">
                        <table id="cart" class="table table-hover table-condensed">
                            <thead>
                                <tr>
                                    <th style="width:50%">Ürün</th>
                                    <th style="width:10%">Fiyat</th>
                                    <th style="width:8%">Adet / Süre</th>
                                    <th style="width:22%" class="text-center">Tutar</th>
                                    <th style="width:10%"></th>
                                </tr>
                            </thead>
                            <tbody id="ordPrdContainer">
                                @*@foreach (var ordPrd in @Model.PrdLst)
    {
        <tr>
            <td data-th="Ürün">
                <div class="row">
                    <div class="col-sm-2 hidden-xs"><img src="http://placehold.it/100x100" alt="..." class="img-responsive" /></div>
                    <div class="col-sm-10">
                        <h4 class="nomargin">@ordPrd.PrdName</h4>
                        <p>@ordPrd.PrdShortDscr</p>
                    </div>
                </div>
            </td>
            <td data-th="Fiyat">&#x20BA;@ordPrd.Amnt</td>
            <td data-th="Adet / Süre">
                <input type="number" class="form-control text-center" value="@ordPrd.Quantity">
            </td>
            <td data-th="Tutar" class="text-center">&#x20BA;@ordPrd.TotalAmnt</td>
            <td class="actions" data-th="">
                <button class="btnUpdatePrd btn blue-soft btn-sm btn-outline" ord-prd-id="@ordPrd.OrdPrdId"><i class="fa fa-refresh"></i></button>
                <button class="btnDeletePrd btn red-soft btn-sm btn-outline" ord-prd-id="@ordPrd.OrdPrdId"><i class="fa fa-trash-o"></i></button>
            </td>
        </tr>
    }*@
                            </tbody>
                            <tfoot>
                                <tr class="visible-xs">
                                    <td class="text-center"><strong>Toplam Tutar &#x20BA;<span id="totalAmnt2">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                    <td class="text-center"><strong>Kargo Ücreti &#x20BA;<span id="shipmentAmnt2">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                    <td class="text-center"><strong>Genel Toplam &#x20BA;<span id="generalTotalAmnt2">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                </tr>
                                <tr class="hidden-xs">
                                    <td></td>
                                    <td colspan="2" class="text-right">Toplam Tutar</td>
                                    <td class="text-right"><strong>&#x20BA;<span id="totalAmnt">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                    <td></td>
                                </tr>
                                <tr class="hidden-xs">
                                    <td></td>
                                    <td colspan="2" class="text-right">Kargo Ücreti</td>
                                    <td class="text-right"><strong>&#x20BA;<span id="shipmentAmnt">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                    <td></td>
                                </tr>
                                <tr class="hidden-xs">
                                    <td></td>
                                    <td colspan="2" class="text-right">Genel Toplam</td>
                                    <td class="text-right"><strong>&#x20BA;<span id="generalTotalAmnt">@Model.PrdLst.Sum(a => a.TotalAmnt)</span></strong></td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="tab-pane" id="tab2">
                        <div class="row">
                            <div class="col-md-6">
                                <!-- BEGIN SAMPLE FORM PORTLET-->
                                <div class="portlet light">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <span class="caption-subject font-green bold uppercase">
                                                KARGO BİLGİLERİ
                                            </span>
                                        </div>
                                    </div>
                                    <div class="portlet-body form">
                                        <div class="form-group " style="height:27px;">
                                        </div>
                                        @Html.Partial("~/Areas/Base/Views/Commerce/Order/Order/Partial_FrmCmrOrdAdr.cshtml", Model.ShpAdr == null ? new FrmCmrOrdAdr() { AdrType = "S" } : Model.ShpAdr)
                                    </div>
                                </div>
                                <!-- END SAMPLE FORM PORTLET-->
                            </div>
                            <div class="col-md-6">
                                <!-- BEGIN SAMPLE FORM PORTLET-->
                                <div class="portlet light">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <span class="caption-subject font-green bold uppercase">
                                                FATURA BİLGİLERİ
                                            </span>
                                        </div>
                                    </div>
                                    <div class="portlet-body form">
                                        @Html.Partial("~/Areas/Base/Views/Commerce/Order/Order/Partial_FrmCmrOrdAdr.cshtml", Model.BlnAdr == null ? new FrmCmrOrdAdr() { AdrType = "B" } : Model.BlnAdr)
                                    </div>
                                </div>
                                <!-- END SAMPLE FORM PORTLET-->
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="tab3">
                        <div class="row">
                            <div class="col-md-6">
                                <!-- BEGIN SAMPLE FORM PORTLET-->
                                <div class="portlet light">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <span class="caption-subject font-green bold uppercase">
                                                ÖDEME
                                            </span>
                                        </div>
                                    </div>
                                    <div class="portlet-body form">
                                        <form class="form-horizontal" id="frmFrmCmrOrdPym">
                                            <div class="form-body">
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" style="text-align:left;">Kart Sahibinin Adı</label>
                                                    <div class="col-md-9">
                                                        <input type="text" class="form-control" id="CardOwner" name="CardHolderName" placeholder="Kart Sahibinin Adı" maxlength="200">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" style="text-align:left;">Kart Numarası</label>
                                                    <div class="col-md-9">
                                                        <input type="text" class="form-control" id="CardNo" name="CardNo" placeholder="Kart Numarası" maxlength="16">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" style="text-align:left;">Son Kullanma Tarihi</label>
                                                    <div class="col-md-6 col-xs-12">
                                                        <div class="row">
                                                            <div class="col-xs-4" style="padding-left:0px;padding-right:5px;">
                                                                <select class="form-control" id="ExpiryMonth" name="ExpiryMonth">
                                                                    <option>Ay</option>
                                                                    <option value="01">01</option>
                                                                    <option value="02">02</option>
                                                                    <option value="03">03</option>
                                                                    <option value="04">04</option>
                                                                    <option value="05">05</option>
                                                                    <option value="06">06</option>
                                                                    <option value="07">07</option>
                                                                    <option value="08">08</option>
                                                                    <option value="09">09</option>
                                                                    <option value="10">10</option>
                                                                    <option value="11">11</option>
                                                                    <option value="12">12</option>
                                                                </select>
                                                                @*<input type="text" class="form-control" id="ExpiryMonth" name="ExpiryMonth" placeholder="Ay" maxlength="2">*@
                                                            </div>
                                                            <div class="col-xs-5" style="padding-left:5px;padding-right:0px;">
                                                                <select class="form-control" id="ExpiryYear" name="ExpiryYear">
                                                                    <option>Yıl</option>
                                                                    @{
                                                                        var startYear = DateTime.Now.Year;
                                                                        for (int i = startYear; i < startYear + 16; i++)
                                                                        {
                                                                            <option value="@i">@i</option>
                                                                        }
                                                                    }

                                                                    
                                                                </select>
                                                                @*<input type="text" class="form-control" id="ExpiryYear" name="ExpiryYear" placeholder="Yıl"  maxlength="2">*@
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" style="text-align:left;">Güvenlik Kodu (CVC)</label>
                                                    <div class="col-md-2 col-xs-4">
                                                        <input type="text" class="form-control" id="CardCvc" name="CardCvc" maxlength="3">
                                                    </div>
                                                </div>
                                              
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!-- END SAMPLE FORM PORTLET-->
                            </div>
                            <div class="col-md-6">
                                <!-- BEGIN SAMPLE FORM PORTLET-->
                                <div class="portlet light">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <span class="caption-subject font-green bold uppercase">
                                                SİPARİŞ ÖZETİ
                                            </span>
                                        </div>
                                    </div>
                                    <div class="portlet-body form">
                                    </div>
                                </div>
                                <!-- END SAMPLE FORM PORTLET-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <div class="row">
                    <div class="col-md-12">
                        <div class="pull-right">
                            <a class="btn default" id="btnBack" style="display:none;">
                                <i class="fa fa-angle-left"></i> Geri
                            </a>
                            <a class="btn btn-outline green" id="btnForward">
                                Devam Et
                                <i class="fa fa-angle-right"></i>
                            </a>
                            <a class="btn green" id="btnConfirm" style="display:none;">
                                <i class="fa fa-check"></i>
                                Onayla
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modal3ds" class="modal fade bs-modal-lg" tabindex="-1" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <a class="close" data-dismiss="modal" aria-hidden="true"></a>
                <div class="caption">
                    <span class="caption-subject bold font-blue-hoki "> 3D Secure Sms Onayı </span>
                </div>
            </div>
            <div class="modal-body">
                <iframe id="frame3ds" name="frame3ds" src="" style="zoom:0.60" width="100%" height="800" frameborder="0">

                </iframe>
            </div>
            <div class="modal-footer display-hide">
                <a id="btnClose3dsModal" data-dismiss="modal" class="btn blue-madison">Tamam</a>
            </div>
        </div>
    </div>
</div>

@section pageScript
{
    <script>
        var model = @Html.Raw(Model.SgSerializeToJson());
    </script>

    <script src="~/Theme/Metronic/assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js" type="text/javascript"></script>
    <script src="~/Areas/Base/Scripts/Commerce/Order/Order.Index.js"></script>
}


